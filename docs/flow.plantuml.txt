@startuml
start

:Load API RAML file;

if (endPointFilter.txt exists?) then (yes)
  :Filter out unnecessary endpoints;
else (no)
  :Continue with all endpoints;
endif

:Begin loop for each endpoint and method;

:Foreach endpoint & method:
  :Search mule flow XML folder;

  :Recursively traverse them;

  :Find all dwl files;

  :Collect all example file names;
  :Send full API path and example names to ChatGPT;
  :Receive request and response file names from ChatGPT;
  :Collect content of java class in DWL files;
  :Collect content from example files, java files and all DWL files;
  :Send content to ChatGPT;
  note right: Generate JSON schema definition using the received content
  :Receive JSON schema definition from ChatGPT;

  :Update API RAML file with schema and examples;

:End loop;

stop
@enduml
